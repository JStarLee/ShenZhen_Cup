#### 3，4

核心：计算可靠性，计算花费，保证约束：用电功率成立

5.3 问题三：设计建造总花费上限为 X，网中最低的用电可靠性达到最大的双供配电网络

​    问题三是在问题二的基础上添加联络线产生的。在原有两个单供供电网中添加联络线，在保证功率约束与建造总花费合理的约束的基础上，对网中最低的用电可靠性这一目标函数求取最大值，最终得到建造费用最低的单供配电网络。

​    分析题目后，

此外，我们根据“电源——分叉点（类似于现实生活中的变压器，能控制多个用户或支路的汇点）——用户”三个层次，对应到树状结构中的三种状态：“根节点——分支节点——叶节点”，如此一来，不仅方便后续图的建立和操作，还能层次分明、逻辑清晰，且便于最终选择相应的线路进行建设，以求得最小成本耗费下的分叉点坐标和用户用电可靠性等目标结果。 

5.3.1 模型的建立——双供配电网模型

（1）供电分配原则

​      题目中说明，满足一个用户全部需求功率，否则断开该用户。这意味着用户只能选择一个电源，或都不选择，不可有两个电源共同供电。因此设用户用电的状态变量为离散的变量 $C[i]$ ，
$$
C[i] = 
\left\{
\begin{matrix}
 0,断开\\
 1,选择电源1\\
 2,选择电源2
\end{matrix}
\right.
$$
​     又因为电源首先满足其所在单供配电网内用户的需求，双供电源多余功率的分配优先提高全配电网供电功率总和，然后提升全配电网最低的用电可靠性，所以电源分配遵循优先供给原则，首先考虑使用本供电网中电源，如果本供电网电源无法连接，才会考虑使用另一个网络中的电源。

（2）双供配电网中的可靠性计算

故设位于网络1的双端供电网中点 $i$ 的可靠性为$r[i]$，将两点$x,y$间的可靠性表示为$r(x,y)$，有：
$$
r[i]=r(s_1,i)+(1-r(s_1,i))\cdot r(s_2,i)
$$
也就是说，$i$ 的可靠性等于使用1电源是的可靠性加上1电源不通时使用2电源的可靠性，遵循条件概率原则。

​     进一步设使用的联络线 为$l_k$ ，两端点分别为 $p_{k1}$ 与 $p_{k2}$。

则对于位于1网络的用户 $i$，
$$
r(s_2,i) = r(i,p_{k1}) \cdot r(s_2,p_{k2}) \cdot r(p_{k1},p_{k2})
$$
而进一步联络线上的可靠性可以写为：
$$
r(p_{k1},p_{k2}) =  (1 − 0.5\% ) ∗ (1 − 0.2\%) ∗ (1 − 0.002 ∗dis(p_{k1},p_{k2}))
$$

- 

（3）双供配电网中总功率的计算

由于上述供电原则，不能确定究竟使用哪一个电源供电，这与电源与用户间通路是否联通有关，所以这里使用期望的方法来刻画功率。
$$
P_1 = \sum_{i=1}^{m}Pi*r_i+\sum_{j=1}^{n}Pj*(1-r_j) \le (1.1+0.55)P_{max1}
$$

$$
P_2 = \sum_{i=1}^{m}Pi*(1-r_i)+\sum_{j=1}^{n}Pj*r_j \le （1.1+0.55)P_{max2}
$$

而功率最多扩展50%，即存在约束
$$
\left\{
\begin{matrix}
P_1 \le (1.1+0.55)P_{max1}\\
P_2 \le (1.1+0.55)P_{max2}
\end{matrix}
\right.
$$

（4）双供配电网中总花费的计算,

双供配电网中总花费分为4部分，设1，2号电源所在的网络花费分别为$cost_1$与$cost_2$，而联络线花费为$cost3$，扩展功率花费为$cost_{pow}$则：
$$
cost_总 = cost_1 + cost_2 + cost_{link}
$$

其中联络线的费用可以表示为：
$$
cost_{link} = length\cdot cost_{switch}+num\cdot cost_{circui}
$$
而扩展功率花费为：
$$
cost_{pow} =
\left\{
\begin{matrix}
 (P_1 - 1.1P_{1max}) \cdot cost_{p1}+(P_2 - 1.1P_{2max})\cdot cost_{p2},P_1\ge P_{1max},P_2\ge P_{2max}\\
 (P_1 - 1.1P_{1max}) \cdot cost_{p1}, P_1\ge P_{1max}\\
 (P_2 - 1.1P_{2max}) \cdot cost_{p2},P_2\ge P_{2max}
\end{matrix}
\right.
$$


（5）双供配电网中的联络线模型

联络线为双供配电网的核心变量。设其构成一个图的集合 $G_l$ 。

定$p_{k1}$,$p_{k2}$

$i,p_{k1}$

$s_1,p_{k1}$

$j,p_{k2}$

$s_2,p_{k2}$

优化目标：

- 花费不超过X，最低的用电可靠性更高
- 最低的用电可靠性超过Y，花费最低





- 